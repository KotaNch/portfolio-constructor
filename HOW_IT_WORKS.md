# Как работает система выбора портфолио

## Алгоритм поиска

Система использует **гибридный подход** для поиска наиболее подходящих портфолио:

### 1. Семантический поиск (85% веса)
- **Нейросеть (если доступна)**: Использует модель `paraphrase-multilingual-MiniLM-L12-v2`
  - Преобразует ваш запрос и описания портфолио в числовые векторы (эмбеддинги)
  - Вычисляет косинусное сходство между векторами
  - Понимает **семантику**, а не только ключевые слова
  - Пример: "минималистичный" найдет портфолио с тегами "clean", "minimal", "простой"
  
- **TF-IDF (fallback)**: Если нейросеть недоступна
  - Анализирует частоту слов в запросе и портфолио
  - Ищет точные совпадения и похожие слова
  - Менее точный, но работает без дополнительных зависимостей

### 2. Совпадение тегов (10% веса)
- Сравнивает теги из вашего запроса с тегами портфолио
- Использует метрику Jaccard (пересечение / объединение множеств)
- Пример: если в запросе есть "красный", найдет портфолио с тегом "red"

### 3. Совпадение стиля дизайна (5% веса)
- Сравнивает прилагательные дизайна (design_adjectives)
- Учитывает как английские, так и русские прилагательные
- Пример: "технический" найдет портфолио с "technical", "инженерный"

## Как формируется текстовое представление портфолио

Для каждого портфолио система создает текстовое описание, включающее:

1. **Описание** (повторяется 2 раза для увеличения веса)
2. **Теги** (повторяются 2 раза + каждый тег отдельно)
3. **Прилагательные дизайна** (английские и русские, повторяются)
4. **Название команды**
5. **Тип портфолио** (cs, ff, pp и т.д.)
6. **Достижение** (Qualifier, Regionals, Worlds и т.д.)

**Почему повторяются?** Повторение важных слов увеличивает их вес в поиске, что делает выбор более точным.

## Итоговая оценка

```
Итоговая оценка = 
  0.85 × Семантическое сходство +
  0.10 × Совпадение тегов +
  0.05 × Совпадение стиля
```

Портфолио сортируются по убыванию итоговой оценки, выбираются топ-3.

## Пример работы

**Ваш запрос:** "красный черный минимализм с секциями для команды"

1. Система анализирует запрос и создает вектор
2. Сравнивает с векторами всех портфолио в базе
3. Находит портфолио с:
   - Высоким семантическим сходством (слова "минимализм", "команда", "секции")
   - Совпадающими тегами ("red", "black", "minimal", "clean layout")
   - Подходящим стилем ("minimal", "clean", "structured")
4. Сортирует по итоговой оценке
5. Возвращает топ-3 наиболее подходящих

## Улучшения для точности

- ✅ Увеличен вес семантического поиска (85% вместо 70%)
- ✅ Улучшено текстовое представление (повторение важных слов)
- ✅ Добавлено расширенное описание в результатах
- ✅ Показывается информация о том, почему портфолио было выбрано
