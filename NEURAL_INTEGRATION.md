# Интеграция нейронной сети для генерации макетов портфолио

## Что было добавлено?

### 1. Нейросетевой рекомендатель (`neural_recommender.py`)
- Использует `sentence-transformers` для семантического поиска
- Многоязычная модель `paraphrase-multilingual-MiniLM-L12-v2` (поддержка русского и английского)
- Автоматический fallback на TF-IDF если нейросеть недоступна

### 2. Генератор макетов (`layout_generator.py`)
- Создает HTML макеты на основе найденных портфолио
- Генерирует только структуру: поля, квадратики, стилистика
- БЕЗ текста и фотографий - чистая разметка

### 3. Новый API endpoint
- `/api/generate-layouts` - генерирует макеты на основе промта

## Установка

### Зависимости
```bash
cd backend
pip install -r requirements.txt
```

Новые зависимости:
- `sentence-transformers>=2.2.0`
- `torch>=1.13.0`

**Примечание:** При первом запуске модель будет автоматически загружена (около 400MB). Это может занять несколько минут.

## Использование

### Через веб-интерфейс
1. Откройте http://localhost:5000
2. Введите описание портфолио в поле ввода
3. Нажмите "Сгенерировать макеты"
4. Система найдет подходящие портфолио с помощью нейросети и создаст 3 HTML макета

### Через API
```bash
curl -X POST http://localhost:5000/api/generate-layouts \
  -H "Content-Type: application/json" \
  -d '{"prompt": "красный черный минимализм с секциями для команды", "count": 3}'
```

Ответ:
```json
{
  "success": true,
  "count": 3,
  "layouts": [
    {
      "id": "layout_1_23396-cs",
      "html": "<!DOCTYPE html>...",
      "metadata": {
        "portfolio_id": "23396-cs",
        "team_name": "Hivemind",
        "score": 0.85,
        "design_attributes": {...},
        "colors": {...},
        "layout_style": "grid"
      }
    }
  ]
}
```

## Как это работает?

1. **Семантический поиск**: Нейросеть анализирует промт и находит наиболее подходящие портфолио из датасета на основе семантического сходства (не просто ключевые слова!)

2. **Генерация макетов**: На основе найденных портфолио создаются HTML макеты с:
   - Цветовой схемой из дизайн-прилагательных
   - Стилем макета (grid, columns, asymmetrical и т.д.)
   - Типичными секциями для FTC портфолио
   - Плейсхолдерами вместо текста и изображений

## Преимущества нейросети

- **Понимание семантики**: "минималистичный" найдет портфолио с тегами "clean", "minimal", "простой" и т.д.
- **Многоязычность**: Работает с русским и английским одновременно
- **Контекстное понимание**: Понимает синонимы и связанные понятия

## Fallback режим

Если нейросеть недоступна (нет интернета, проблемы с установкой), система автоматически переключится на TF-IDF поиск (старый метод).

## Производительность

- Первый запуск: ~2-3 минуты (загрузка модели)
- Последующие запуски: ~5-10 секунд (инициализация)
- Генерация макетов: < 1 секунда
